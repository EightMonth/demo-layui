<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>添加角色</title>
    <link rel="stylesheet" href="../lib/layui-v2.6.3/css/layui.css" media="all">
    <link rel="stylesheet" href="../css/public.css" media="all">
    <link rel="stylesheet" href="../js/lay-module/dtree/dtree.css" media="all">
    <link rel="stylesheet" href="../js/lay-module/dtree/font/dtreefont.css" media="all">
    <style>
        .layui-btn:not(.layui-btn-lg ):not(.layui-btn-sm):not(.layui-btn-xs) {
            height: 34px;
            line-height: 34px;
            padding: 0 8px;
        }
    </style>
</head>
<body>
<div class="layuimini-container">
    <div id="test7" class="demo-transfer"></div>

    <div class="layui-input-block">
        <button type="button" class="layui-btn layui-btn-normal" lay-transferactive="getData">获取右侧数据</button>
    </div>
</div>

<script src="../lib/layui-v2.6.3/layui.js" charset="utf-8"></script>
<script src="../js/lay-config.js?v=1.0.4" charset="utf-8"></script>
<script th:inline="none">
    layui.use('transfer', function(){
       var transfer = layui.transfer, $ = layui.jquery, layer = layui.layer,util = layui.util;

        //模拟数据
        var data1 = [
            {"value": "1", "title": "李白"}
            ,{"value": "2", "title": "杜甫"}
            ,{"value": "3", "title": "苏轼"}
            ,{"value": "4", "title": "李清照"}
            ,{"value": "6", "title": "巴金"}
            ,{"value": "7", "title": "冰心"}
            ,{"value": "8", "title": "矛盾"}
            ,{"value": "9", "title": "贤心"}
        ];

        var roleData;
        var ss = $.ajax({
            url: '/role',
            async: false,
            method: 'get',
            success: function (result) {
                roleData = result;
            }
        });

        transfer.render({
            elem: '#test7',
            data: roleData,
            id: 'selectKey', //定义唯一索引
            parseData: function(res) {
                return {
                    "value": res.id,
                    "title": res.name,
                    "disable": res.disable,
                    "checked": res.checked
                }
            },
            value: ['2', '9']
        })

        util.event("lay-transferactive", {
            getData: function() {
                var getData = transfer.getData('selectKey'); //获取右侧数据
                layer.alert(JSON.stringify(getData))
            }
        });
    });

</script>
</body>
</html>